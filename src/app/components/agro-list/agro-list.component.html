<form [formGroup]="form" class="mb-1 ms-4 me-4" >
    <div class="row">
        <div class="col">
            <label for="cropType" class="form-label">Filtra por tipo de cultivo:</label>
            <select class="form-select" id="cropType" type="submit" aria-label="Selecciona el tipo de cultivo"
              formControlName="cropType" (change)="onSelect()">
                <option value="0" selected>Todos los cultivos</option>
                <ng-container *ngFor="let crop of cropTypes">
                    <option [value]="crop.id">{{crop.name}}</option>
                </ng-container>
            </select>
        </div>
            <div class="col-4 mt-auto">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"
                        formControlName="showHidden" (change)="onSelect()">
                    <label class="form-check-label" for="flexSwitchCheckChecked">Mostrar inactivos</label>
                </div>
            </div>
    </div>
</form>

@if (this.loading) {
    <div class="row justify-content-evenly">
        <div *ngFor="let i of this.placeHoldersItems" class="col">
            <app-card-farmer-placeholder></app-card-farmer-placeholder>
        </div>
    </div>
}

<ng-container *ngIf="this.farmers.length > 0 && !this.loading; else elseBlockNoFarmers">
    <section
        class="row ms-auto me-auto row-cols-md-2 row-cols-lg-3 row-cols-xl-3 row-cols-xxl-4 row-cols-sm-1 position-relative">
        <article *ngFor="let farmer of this.farmers; let index = index; let last = last"
            class="col d-flex justify-content-center">
            <app-card-farmer [farmer]="farmer" [cities]="this.cities" [cropTypes]="this.cropTypes"></app-card-farmer>
        </article>
    </section>
</ng-container>
<ng-template #elseBlockNoFarmers>
    <div *ngIf="!this.loading" class="w-100 text-center mt-4 me-4 fst-italic">ðŸ«¥ No se han encontrado agricultores</div>
</ng-template>

<div *ngIf="this.lastError" class="alert alert-danger alert-dismissible animate__animated animate__flash m-4"
    role="alert">
    <div>ðŸ˜Ÿ {{this.lastError}}</div>
</div>

<button aria-label="AÃ±adir granjero" type="button"
    class="btn btn-danger btn-lg fixed-bottom ms-auto rounded-circle btn-add"
    [ngClass]="{'animate__animated animate__rotateOut animate__faster': showButtonAnim}"
    (click)="showButtonAnim = true" (animationend)="goAddFarmer()">
</button>